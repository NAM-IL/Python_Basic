## [ 2025-04-07(Mon.) ](https://github.com/NAM-IL/Python_Basic/blob/main/%EC%88%98%EC%97%85%EB%82%B4%EC%9A%A9/04%EC%9B%94/2025-04-07.md) : 파이썬 라이브러리와 활용 2일차

- [pandas documentation](https://pandas.pydata.org/docs/index.html)
    - [API reference](https://pandas.pydata.org/docs/reference/index.html)
- [The Python Tutorial (v.3.13) ](https://docs.python.org/3.13/tutorial/index.html)
- [파이썬 자습서 (v.3.13) ](https://docs.python.org/ko/3.13/tutorial/index.html)
- yeonsookim-wt/[lgtm](https://github.com/yeonsookim-wt/lgtm)
- [점프 투 파이썬](https://wikidocs.net/book/1)
- [⭐ 파이썬 독학하기 좋은 위키독스 모음집](https://hello-sec.tistory.com/167)
- [⭐ Jupyter notebook 단축키](https://velog.io/@one_step/Jupyter-notebook-%EB%8B%A8%EC%B6%95%ED%82%A4)
- [[Jupyter 주피터] 주요 단축키 모음](https://planharry.tistory.com/22)
- [⭐ 주피터 노트북(Jupyter Notebook) 사용법 - 기본 설치/실행, 단축키, 매직 명령어, Markdown, 테마스킨, nbextensions](https://m.blog.naver.com/towards-ai/222182455430)
- [기초탄탄 파이썬_데이터 시각화](https://wikidocs.net/book/9285)
    - [02장 판다스 pandas](https://wikidocs.net/193858)
- [파이썬 마스터하기 : Pandas](https://velog.io/@euisuk-chung/%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EC%8B%9C%EA%B0%81%ED%99%94-%EB%A7%88%EC%8A%A4%ED%84%B0%ED%95%98%EA%B8%B0-Pandas)
- [파이썬으로 배우는 알고리즘 트레이딩 (개정판-2쇄)](https://wikidocs.net/book/110)
    - [13. Pandas를 이용한 데이터 분석 기초 (revision)](https://wikidocs.net/2873)
- [파이썬을 이용한 비트코인 자동매매 (개정판)](https://wikidocs.net/book/1665)
- [Git 설치 및 환경설정(mac os)](https://velog.io/@wiseah/Git-%EC%84%A4%EC%B9%98-%EB%B0%8F-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95mac-os)
- [pandas apply 함수와 lambda 설명](https://koreadatascientist.tistory.com/115)
- [03-01. 축 기준 (apply)](https://wikidocs.net/151872)
- [Jupyter Notebook에서 Magic Command 사용하기](https://velog.io/@log327/Jupyter-Notebook%EC%97%90%EC%84%9C-Magic-Command-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)
- [01-IPython 매직커맨드](https://wikidocs.net/75005)

---

### 🔹 [팬더스_명령어_꿀팁.ipynb] #217 부터 
```
df_filtered = df[['name', 'age']]
-----
name	age
0	John	20
1	Jenny	30
2	Nate	30
3	Julia	40
4	Brian	45
5	Chris	25
```
```
#217
pandas docu 내가찾고자 하는 메서드 검색해서 옵션 이해하기
메서드를 이용한 필터링
스테틱 메서드
키워드인자 방식으로 필터될 컬럼명을 리스트로 전달
axis 종축, 횡축, 열, 행
axis = 0 행 0 or 'index'
axis = 1 열 1 or 'columns'
0 or 
```
- [DataFrame.filter(items=None, like=None, regex=None, axis=None)[source]](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.filter.html#pandas.DataFrame.filter)

### 🔹 원하는 글자를 가진 로우를 보여줍니다.
```
# db sql에서
# 열을 이름에 a가 들어간 컬럼을 필터해서 데이터프레임으로
# select columns containing 'a'
df.filter(like='a',axis=1)
---
	name	age
0	John	20
1	Jenny	30
2	Nate	30
3	Julia	40
4	Brian	45
5	Chris	25
```
- [[SQL] SELECT문과 LIKE절](https://velog.io/@mjkiim_0217/SQL-SELECT%EB%AC%B8%EA%B3%BC-LIKE%EC%A0%88)

### 🔹 정규식으로 필터도 가능합니다. #220
```
정규식
정규식에서 내가 원하는 문자열을 패터매칭을 통해 가져오기

파이썬에서 정규식 다룰때는 re
완전일치 패턴매칭
위치인덱스 = "안녕하세요. 홍길동님".find("안녕하세요)
"안녕하세요 홍길동님".replace("안녕하세요", "hello")

정규식 문법 공부
sql LLM 
정규식 LLM 이용

# b로 끝나는 문장만 검색
# select columns using regex
df.filter(regex='b$',axis=1)
---
job
0	student
1	developer
2	teacher
3	dentist
4	manager
5	intern
```
- [08-2 정규 표현식 시작하기](https://wikidocs.net/4308)
- [YTHON 정규식 문법 및 예제 ( 전화번호, 이메일, 숫자 출력, 공백 제거, URL 출력, 주민 번호 패턴 찾기 )](https://urame.tistory.com/entry/PYTHON-%EC%A0%95%EA%B7%9C%EC%8B%9D-%EB%AC%B8%EB%B2%95-%EB%B0%8F-%EC%98%88%EC%A0%9C-%EC%A0%84%ED%99%94%EB%B2%88%ED%98%B8-%EC%9D%B4%EB%A9%94%EC%9D%BC-%EC%88%AB%EC%9E%90-%EC%B6%9C%EB%A0%A5-%EA%B3%B5%EB%B0%B1-%EC%A0%9C%EA%B1%B0-URL-%EC%B6%9C%EB%A0%A5-%EC%A3%BC%EB%AF%BC-%EB%B2%88%ED%98%B8-%ED%8C%A8%ED%84%B4-%EC%B0%BE%EA%B8%B0)
- [003 정규표현식으로 개인정보를 보호하려면? ― re](https://wikidocs.net/133294)
- [https://regexr.com/](https://regexr.com/)


### 🔹 로우 드롭하기
### 🔹 로우 인덱스로 로우를 드롭할 수 있습니다. #221
```
내가 원하는 것만 남긴다.
드롭된 결과는 데이터프레임에 저장되지 않는다.
원본유지 옵션 주면 원본 바꿈

# 존이나 네이트가 들어있는 행을 드롭 #223
# 행 자체가 사라지니까 정규성이 유지됨
df.drop(['John', 'Nate'])
---
	age	job
Jenny	30	developer

```

### 🔹 드롭된 결과를 바로 데이터프레임에 저장하는 방법
🔹 inplace 키워드를 사용하면, 따로 저장할 필요없이, 드롭된 결과가 데이터프레임에 반영됩니다.
```
friend_dict_list = [{'age': 20, 'job': 'student'},
         {'age': 30, 'job': 'developer'},
         {'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(friend_dict_list, index = ['John', 'Jenny', 'Nate'])
---
	age	job
John	20	student
Jenny	30	developer
Nate	30	teacher

df.drop(['John', 'Nate'], inplace = True)
---
	age	job
Jenny	30	developer

```
### 로우 인덱스로 드롭하는 예제입니다.
```
friend_dict_list = [{'name': 'Jone', 'age': 20, 'job': 'student'},
         {'name': 'Jenny', 'age': 30, 'job': 'developer'},
         {'name': 'Nate', 'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(friend_dict_list)
---
	age	job
John	20	student
Jenny	30	developer
Nate	30	teacher

df = df.drop(df.index[[0,2]])
---
age	job	name
1	30	developer	Jenny
---
```

### 컬럼값으로 로우 드롭하기
```
컬럼 age에 데이터가 30이 아닌것만 필터해서 데이터프레임화 
! 아니다.

friend_dict_list = [{'name': 'Jone', 'age': 20, 'job': 'student'},
         {'name': 'Jenny', 'age': 30, 'job': 'developer'},
         {'name': 'Nate', 'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(friend_dict_list)
---
age	job	name
0	20	student	Jone
1	30	developer	Jenny
2	30	teacher	Nate

#235
df = df[df.age != 30]
---
	name	age	job
0	Jone	20	student
```

### 컬럼 드롭하기
```
friend_dict_list = [{'name': 'Jone', 'age': 20, 'job': 'student'},
         {'name': 'Jenny', 'age': 30, 'job': 'developer'},
         {'name': 'Nate', 'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(friend_dict_list)
---

age	job	name
0	20	student	Jone
1	30	developer	Jenny
2	30	teacher	Nate

df = df.drop('age', axis=1)
---

name	job
0	Jone	student
1	Jenny	developer
2	Nate	teacher
```

### 🔹 컬럼 추가 또는 변경하기 #240
```
특성공학 - 컬럼을 다루는 것?
피처 엔지니어링
뜬다 프롬프트 엔지니어가...

friend_dict_list = [{'name': 'Jone', 'age': 15, 'job': 'student'},
         {'name': 'Jenny', 'age': 30, 'job': 'developer'},
         {'name': 'Nate', 'age': 30, 'job': 'teacher'}]

df = pd.DataFrame(friend_dict_list, columns = ['name', 'age', 'job'])
---
	name	age	job
0	Jone	15	student
1	Jenny	30	developer
2	Nate	30	teacher

아래와 같은 방법으로 새로운 컬럼을 기본값과 함께 추가하실 수 있다.
df['salary'] = 0
```

### 🔹 기존 컬럼값을 가지고 새로운 컬럼을 생성하는 예제입니다.
```
friend_dict_list = [{'name': 'Jone', 'age': 15, 'job': 'student'},
         {'name': 'Jenny', 'age': 30, 'job': 'developer'},
         {'name': 'Nate', 'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(friend_dict_list, columns = ['name', 'age', 'job'])
---
	name	age	job
0	Jone	15	student
1	Jenny	30	developer
2	Nate	30	teacher

#넘파이를 사용하셔서, 한줄에 새로운 컬럼값을 생성하실 수도 있습니다.
import numpy as np

# 넘파이야 조건 데이터프레임 Job 컬럼이 학생이 아니면 yes, 학색이면 no 로 채워라
                                참/거짓
                                조건식            참인경우 거짓인경우              
df['salary'] = np.where(df['job'] != 'student' , 'yes', 'no')
---
	name	age	job	salary
0	Jone	15	student	no
1	Jenny	30	developer	yes
2	Nate	30	teacher	yes

# 나이를 참조해서 연령대 컬럼 추가
import numpy as np
# df['salary'] = np.where(df['job'] != 'student' , 'yes',
df['연령대'] = np.where(df['age'] > 20 , '성인', '청소년')
---
name	age	job	연령대
0	Jone	15	student	청소년
1	Jenny	30	developer	성인
2	Nate	30	teacher	성인
```
### 🔹 Tip
```
직법 #을 넣으면 안됨
주석처리 단축키 ctrl + '/'

스페이스(4) 로 하면 안됨
들여쓰기 텝을 눌러서 한다.

정렬에 대한 이해
내가 쓰고 있는 문법이 어디에 속해서 작동하는
```

### 🔹아래는 기존에 있는 두 컬럼값을 더해서 새로운 컬럼을 만드는 예제입니다.
```
friend_dict_list = [{'name': 'John', 'midterm': 95, 'final': 85},
         {'name': 'Jenny', 'midterm': 85, 'final': 80},
         {'name': 'Nate', 'midterm': 10, 'final': 30}]
df = pd.DataFrame(friend_dict_list, columns = ['name', 'midterm', 'final'])
---
name	midterm	final
0	John	95	85
1	Jenny	85	80
2	Nate	10	30


df['total'] = df['midterm'] + df['final']
---
name	midterm	final	total
0	John	95	85	180
1	Jenny	85	80	165
2	Nate	10	30	40

```


### 🔹기존의 컬럼을 사용하여 새로운 컬럼을 만드는 예제 #249
```
대표값
평균 mean  산술 기하 조화
중앙값
최빈값

df['average'] = df['total'] / 2
---
	name	midterm	final	total	average
0	John	95	85	180	90.0
1	Jenny	85	80	165	82.5
2	Nate	10	30	40	20.0
```
- [Average와 Mean의 차이](https://computervision.tistory.com/20)

### 🔹아래와 같이, 리스트에 조건별 값을 담아서, 새로운 컬럼으로 추가시킬 수 있다. #251
```
# 리스트 컴르리헨션

grades = []
# 함수화 해서
# list(map())
def 등급확인함수(평균):


for row in df['average']:
    if row >= 90:
        grades.append('A')
    elif row >= 80:
        grades.append('B')
    elif row >= 70:
        grades.append('C')
    else:
        grades.append('F')
        
df['grade'] = grades

```


### apply 함수 사용 예제입니다.  
### 🔹apply를 사용하시면, 깔끔하게 컬럼의 값을 변경하는 코드를 구현하실 수 있다. #253
```
def pass_or_fail(row):
    print(row)
    if row != "F":
        return 'Pass'
    else:
        return 'Fail'

df.grade = df.grade.apply(pass_or_fail)
---
A
B
F
```
- [pandas apply 함수와 lambda 설명](https://koreadatascientist.tistory.com/115)
- [03-01. 축 기준 (apply)](https://wikidocs.net/151872)


### 🔹apply를 사용해서 연월일의 정보에서 연도만 빼보는 예제입니다. #256
```
date_list = [{'yyyy-mm-dd': '2000-06-27'},
         {'yyyy-mm-dd': '2002-09-24'},
         {'yyyy-mm-dd': '2005-12-20'}]
df = pd.DataFrame(date_list, columns = ['yyyy-mm-dd'])
---
yyyy-mm-dd
0	2000-06-27
1	2002-09-24
2	2005-12-20
```
```
# 팬더스_명령어_꿀팁.ipynb #257
# 함수 년도만 추출하는 함수
#     특정 행이 들어오면 split
#     문자열을 기준으로 쪼게서 리스트로 만들어준다.
# 3개의 아이템디 들어었는 0 1 2리스트에서 0번째 항목을 리턴
# 연도만 문자열로 리턴

def extract_year(row):
    return row.split('-')[0]

df['year'] = df['yyyy-mm-dd'].apply(extract_year)
---
yyyy-mm-dd	year
0	2000-06-27	2000
1	2002-09-24	2002
2	2005-12-20	2005


def extract_month(row):
    return row.split('-')[1]
    
df['month'] = df['yyyy-mm-dd'].apply(extract_month)
---
	yyyy-mm-dd	year	month
0	2000-06-27	2000	06
1	2002-09-24	2002	09
2	2005-12-20	2005	12

df['year'] = df['yyyy-mm-dd'].apply(extract_year)
df['month'] = df['yyyy-mm-dd'].apply(extract_month)
df['day'] = df['yyyy-mm-dd'].apply(extract_day)

🔹 apply를 사용해서 연월일의 정보에서 연도만 빼보는 예제입니다. #256

date_list = [{'yyyy-mm-dd': '2000-06-27'},
         {'yyyy-mm-dd': '2002-09-24'},
         {'yyyy-mm-dd': '2005-12-20'}]
df = pd.DataFrame(date_list, columns = ['yyyy-mm-dd'])
df

def extract_YMD(row, idx):
    if idx  == 0:
        ret = row.split('-')[0]
    elif idx == 1:
        ret = row.split('-')[1]
    else:
        ret = row.split('-')[2]
    return ret
    
df['year'] = df['yyyy-mm-dd'].apply(extract_YMD, idx = 0)
df['month'] = df['yyyy-mm-dd'].apply(extract_YMD, idx = 1)
df['day'] = df['yyyy-mm-dd'].apply(extract_YMD, idx = 2)
df
------------------

	yyyy-mm-dd	year	month	day
0	2000-06-27	2000	06	27
1	2002-09-24	2002	09	24
2	2005-12-20	2005	12	20
```
- [python pandas: apply a function with arguments to a series](https://stackoverflow.com/questions/12182744/python-pandas-apply-a-function-with-arguments-to-a-series)


### apply 함수에 파라미터 전달하기(apply: column 각행에 적용)
### 🔹키워드 파라미터를 사용하시면, apply가 적용된 함수에 파라미터를 전달할 수 있다. #260

```
def extract_year(year, current_year):
    return current_year - int(year)


df['age'] = df['year'].apply(extract_year, current_year=2018)


def extract_year(year, current_year):
    from datetime import datetime
    now = datetime.now()
    now.year
    current_year = int(now.year)
    return current_year - int(year)

df['age'] = df['year'].apply(extract_year, current_year=2018)
---

yyyy-mm-dd	year	month	day	age
0	2000-06-27	2000	06	27	25
1	2002-09-24	2002	09	24	23
2	2005-12-20	2005	12	20	20
```

### apply 함수에 한 개 이상의 파라미터 전달하기 (apply: column 각행에 적용)
### 🔹키워드 파라미터를 추가해주시면, 원하시는만큼의 파라미터를 함수에 전달 가능합니다. #261
```
def get_introduce(age, prefix, suffix):
    return prefix + str(age) + suffix

df['introduce'] = df['age'].apply(get_introduce, prefix="I am ", suffix=" years old")
---
yyyy-mm-dd	year	age	introduce
0	2000-06-27	2000	18	I am 18 years old
1	2002-09-24	2002	16	I am 16 years old
2	2005-12-20	2005	13	I am 13 years old
```

### apply 함수에 여러개의 컬럼을 동시에 전달하기
### 🔹axis=1이라는 키워드 파라미터를 apply 함수에 전달해주면, 모든 컬럼을 지정된 함수에서 사용 가능 #264
```

```


### Map 함수로 컬럼 추가 및 변경하기
### 🔹파라미터로 함수를 전달하면 apply 함수와 동일하게 컬럼값을 추가 및 변경할 수 있다. #265
```
파이썬 내장객체 map
pandas의 map 메서드 이용한 것

def extract_year(row):
    return row.split('-')[0]

date_list = [{'yyyy-mm-dd': '2000-06-27'},
         {'yyyy-mm-dd': '2002-09-24'},
         {'yyyy-mm-dd': '2005-12-20'}]
df = pd.DataFrame(date_list, columns = ['yyyy-mm-dd'])
---
yyyy-mm-dd
0	2000-06-27
1	2002-09-24
2	2005-12-20

df['year'] = df['yyyy-mm-dd'].map(extract_year)
---
yyyy-mm-dd	year
0	2000-06-27	2000
1	2002-09-24	2002
2	2005-12-20	2005
```


### 파라미터로 딕셔너리를 전달하면 컬럼값을 원하는 값으로 쉽게 변경이 가능
### 🔹기존의 컬럼값은 딕셔너리의 key로 사용되고, 해당되는 value의 값으로 컬럼값이 변경됨 #267
```
job_list = [{'age': 20, 'job': 'student'},
         {'age': 30, 'job': 'developer'},
         {'age': 30, 'job': 'teacher'}]
df = pd.DataFrame(job_list)
---
age	job
0	20	student
1	30	developer
2	30	teacher

df.job = df.job.map({"student":1,"developer":2,"teacher":3})
---
age	job
0	20	1
1	30	2
2	30	3
```


### Applymap
### 🔹데이터프레임 전체의 각각의 값을 한번에 변경시키실 때 사용하시면 좋습니다. #270
```
# python float타입
x_y = [{'x': 5.5, 'y': -5.6},
         {'x': -5.2, 'y': 5.5},
         {'x': -1.6, 'y': -4.5}]
df = pd.DataFrame(x_y)

# pandas의 float타입으로 변환
---
x	y
0	5.5	-5.6
1	-5.2	5.5
2	-1.6	-4.5

df['x'].dtype
---
dtype('float64')

df = df.applymap(np.around)
---
x	y
0	6.0	-6.0
1	-5.0	6.0
2	-2.0	-4.0
```


### 🔹데이터프레임에 로우 추가하기
```
# 기본은 행방향으로 합치기
# 열방향으로 합치기
friend_dict_list = [{'name': 'John', 'midterm': 95, 'final': 85},
         {'name': 'Jenny', 'midterm': 85, 'final': 80},
         {'name': 'Nate', 'midterm': 10, 'final': 30}]
df = pd.DataFrame(friend_dict_list, columns = ['name', 'midterm', 'final'])
---
name	midterm	final
0	John	95	85
1	Jenny	85	80
2	Nate	10	30


df2 = pd.DataFrame([['Ben', 50,50]], columns = ['name', 'midterm', 'final'])
df2.head()
---
	name	midterm	final
0	Ben	50	50


# df 기준으로 df2 데이터를 붙인다.(기본은 하단으로 붙인다.)
# 축생각 기본값이니까 axis = 0 행추가
# ignore_index=true 는 합쳐진 후 인덱스 리셋 
df.append(df2, ignore_index=True)

합쳐진 후에도 표준화된 데이터 프레임으로 만들기

```
- [pandas.DataFrame.append](https://pandas.pydata.org/pandas-docs/version/1.3/reference/api/pandas.DataFrame.append.html)
- [[Python] 데이터프레임 결합 (.concat, .append)](https://ordo.tistory.com/51)


### Group by
### 🔹데이터에서 정보를 취하기 위해서 그룹별로 묶는 방법 #275
```
# 학문 이름
#   철학 필라서피
#   필리오 사랑
#   소피아 지혜
#   철학자 지혜를 사랑하는 사람
student_list = [{'name': 'John', 'major': "Computer Science", 'sex': "male"},
                {'name': 'Nate', 'major': "Computer Science", 'sex': "male"},
                {'name': 'Abraham', 'major': "Physics", 'sex': "male"},
                {'name': 'Brian', 'major': "Psychology", 'sex': "male"},
                {'name': 'Janny', 'major': "Economics", 'sex': "female"},
                {'name': 'Yuna', 'major': "Economics", 'sex': "female"},
                {'name': 'Jeniffer', 'major': "Computer Science", 'sex': "female"},
                {'name': 'Edward', 'major': "Computer Science", 'sex': "male"},
                {'name': 'Zara', 'major': "Psychology", 'sex': "female"},
                {'name': 'Wendy', 'major': "Economics", 'sex': "female"},
                {'name': 'Sera', 'major': "Psychology", 'sex': "female"}
         ]
df = pd.DataFrame(student_list, columns = ['name', 'major', 'sex'])
----
	name	major	sex
0	John	Computer Science	male
1	Nate	Computer Science	male
2	Abraham	Physics	male
3	Brian	Psychology	male
4	Janny	Economics	female
5	Yuna	Economics	female
6	Jeniffer	Computer Science	female
7	Edward	Computer Science	male
8	Zara	Psychology	female

9	Wendy	Economics	female
10	Sera	Psychology	female

groupby_major = df.groupby('major')
groupby_major.groups
---
{'Computer Science': Int64Index([0, 1, 6, 7], dtype='int64'),
 'Economics': Int64Index([4, 5, 9], dtype='int64'),
 'Physics': Int64Index([2], dtype='int64'),
 'Psychology': Int64Index([3, 8, 10], dtype='int64')}
```
- [Pandas: How to append a dataframe to itself if .append has been deprecated? [duplicate]](https://stackoverflow.com/questions/77512736/pandas-how-to-append-a-dataframe-to-itself-if-append-has-been-deprecated)
  ```
   import pandas as pd
   df = pd.DataFrame({'col1' : [1,2,3]})
   df = pd.concat([df,df]).reset_index(drop = True)
   print(df)
   ---
        col1
    0     1
    1     2
    2     3
    3     1
    4     2
    5     3

- [Jupyter Notebook에서 Magic Command 사용하기](https://velog.io/@log327/Jupyter-Notebook%EC%97%90%EC%84%9C-Magic-Command-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)
- [01-IPython 매직커맨드](https://wikidocs.net/75005)

